//- VARS
- var imgFolder = '../images/'

mixin header(menu_open)
	header.header.page__header
		.wrapper.page__wrapper
			| header

mixin picture(opts)
	- var name = path.parse(opts.src).name
	- var ext = path.parse(opts.src).ext.substr(1)
	- var srcFile = path.resolve('src','images',opts.src)
	- var alt = opts.alt ? opts.alt : name;
	- var className = opts.class;
	- var data = opts.data ? opts.data : '';
	- function setQuality(quality){ images( srcFile, quality ); }
	if opts.quality
		#{setQuality(opts.quality)}
	if config.images.sizes.length > 0 || images.webp
		picture
			each size in config.images.sizes
				if config.images.webp
					source(srcset=`${imgFolder}${name}-${size}.webp` type="image/webp" media=`(max-width: ${size}px)`)
				source(srcset=`${imgFolder}${name}-${size}.${ext}` type=`image/${ext}` media=`(max-width: ${size}px)`)
			if config.images.webp
				source(srcset=`${imgFolder}${name}.webp` type="image/webp" )
			source(srcset=`${imgFolder}${name}.${ext}` type=`image/${ext}`)
			img(src=`${imgFolder}${name}.${ext}` class=className alt=alt )&attributes(data)
	else
		img(src=`${imgFolder}${name}.${ext}` class=className alt=alt )&attributes(data)
